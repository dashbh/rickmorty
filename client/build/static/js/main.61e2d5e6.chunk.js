(this["webpackJsonprick-morty-client"]=this["webpackJsonprick-morty-client"]||[]).push([[0],{64:function(e,t,n){e.exports=n(94)},69:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(52),l=n.n(c),u=(n(69),n(16)),o=n(34),i=n(18),s=n(19),m=n(20),p=n(21),d=n(97),f=n(5),g=n(31);function h(){var e=Object(f.a)(['\nquery Character(\n  $species: String = "",\n  $gender: String = "",\n  $name: String = "") \n{\n  characters(species: $species,\n    gender: $gender,\n    name: $name)\n  {\n    id\n    name\n    status\n    species\n    gender\n    image,\n    location {\n      name\n    }\n    origin {\n      name\n    }\n  }\n}']);return h=function(){return e},e}var v=n.n(g)()(h()),b=n(7);function E(){var e=Object(f.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    background: rgb(32, 35, 41);\n"]);return E=function(){return e},e}function y(){var e=Object(f.a)(["\n    flex-grow: 1;\n    width: 70%;\n"]);return y=function(){return e},e}function O(){var e=Object(f.a)(["\n    width: 100%;\n    margin: 0 20px 0 0;\n    @media (min-width: 768px) {\n        max-width: 25%;\n    }\n"]);return O=function(){return e},e}var j=b.a.aside(O()),w=b.a.main(y()),S=b.a.div(E()),k=n(56),x=n.n(k);function C(){var e=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 10px 0;\n\n    span {\n        font-size: 0.7rem;\n        color: #9e9e9e;\n    }\n    p {\n        width: 100%;\n        font-size: 0.9rem;\n        font-weight: 200;\n        text-align: right;\n        margin: 0;\n    }\n"]);return C=function(){return e},e}function N(){var e=Object(f.a)(["\n    color: rgb(255, 152, 0);\n    padding: 10px 1rem;\n    background: rgb(51, 51, 51);\n    height: 200px\n"]);return N=function(){return e},e}function q(){var e=Object(f.a)(["\n    color: rgb(187, 187, 187);\n    margin: 0;\n"]);return q=function(){return e},e}function I(){var e=Object(f.a)(["\n    font-weight: bold;\n    color: rgb(245, 245, 245);\n    margin: 0;\n"]);return I=function(){return e},e}function A(){var e=Object(f.a)(["\n    width: 100%;\n    opacity: 0.8;\n    position: absolute;\n    bottom: 0px;\n    background: rgb(32, 35, 41);\n    padding: 0.625rem;\n"]);return A=function(){return e},e}function F(){var e=Object(f.a)(["\n    width: 100%;\n    background: #202329;\n"]);return F=function(){return e},e}function R(){var e=Object(f.a)(["\n    position: relative;\n    overflow: hidden;\n"]);return R=function(){return e},e}function L(){var e=Object(f.a)(["\n    width: 100%;\n    @media (min-width: 768px) {\n        width: 30%;\n    }\n    margin: 25px 0;\n    position: relative;\n    border-radius: 0.5rem;\n"]);return L=function(){return e},e}var P=b.a.div(L()),U=b.a.div(R()),D=b.a.div(F()),$=b.a.div(A()),T=b.a.h2(I()),G=b.a.p(q()),B=b.a.div(N()),M=b.a.div(C()),W=function(e){var t=e.charecter;return r.a.createElement(P,null,r.a.createElement(U,null,r.a.createElement(D,null,r.a.createElement("img",{src:t.image,alt:t.name})),r.a.createElement($,null,r.a.createElement(T,null,t.name),r.a.createElement(G,null,"id:",t.id," ","- created\xa0",x()().diff(t.created,"years")," ","years ago"))),r.a.createElement(B,null,r.a.createElement(M,null,r.a.createElement("span",null,"STATUS"),r.a.createElement("p",null,t.status)),r.a.createElement(M,null,r.a.createElement("span",null,"SPECIES"),r.a.createElement("p",null,t.species)),r.a.createElement(M,null,r.a.createElement("span",null,"GENDER"),r.a.createElement("p",null,t.gender)),r.a.createElement(M,null,r.a.createElement("span",null,"ORIGIN"),r.a.createElement("p",null,t.origin.name)),r.a.createElement(M,null,r.a.createElement("span",null,"LAST LOCATION"),r.a.createElement("p",null,t.location.name))))};function _(){var e=Object(f.a)(["\n    display: block;\n"]);return _=function(){return e},e}function J(){var e=Object(f.a)(["\n    display: block;\n"]);return J=function(){return e},e}function z(){var e=Object(f.a)(["\n    display: flex;\n    margin: 5px 0;\n    justify-content: space-between\n"]);return z=function(){return e},e}var H=b.a.div(z()),K=b.a.div(J()),Q=b.a.div(_()),V=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1];return r.a.createElement(H,null,r.a.createElement(K,null,r.a.createElement("label",{htmlFor:"search"},"Search By Name"),"\xa0",r.a.createElement("input",{type:"text",name:"search",id:"search",onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return e.onSearch(c)}},"Search")),r.a.createElement(Q,null,r.a.createElement("label",{htmlFor:""},"Sort By ID"),"\xa0",r.a.createElement("select",{id:"sort",onChange:function(t){return e.onSort(t.target.value)}},r.a.createElement("option",{value:"ASC"},"Ascending"),r.a.createElement("option",{value:"DSC"},"Descending"))))};function X(){var e=Object(f.a)(["\n    padding: 5px 0;\n"]);return X=function(){return e},e}function Y(){var e=Object(f.a)(["\n    padding: 10px;\n    border: 1px solid #ccc;\n    margin-bottom: 20px;\n"]);return Y=function(){return e},e}var Z=b.a.div(Y()),ee=b.a.div(X()),te={species:{label:"Species",options:[{key:4,text:"Human",value:"Human"},{key:6,text:"Alien",value:"Alien"},{key:8,text:"Unknown",value:"unknown"}]},gender:{label:"Gender",options:[{key:1,text:"Female",value:"Female"},{key:2,text:"Male",value:"Male"},{key:3,text:"Genderless",value:"Genderless"},{key:4,text:"Unknown",value:"unknown"}]}},ne=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onToggle=function(e,t){var n=a.state.filters,r=a.props.onFilter,c=n[t]?n[t]:[];e.target.checked?(c.push(e.target.value),n[t]=c):n[t]=c.filter((function(t){return t!==e.target.value})),a.setState({filters:Object(u.a)({},n)});var l={};for(var o in n)l[o]=n[o].join(",");r(l)},a.state={filters:{},filterOptions:te},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state.filterOptions;return r.a.createElement("div",null,r.a.createElement("h2",null,"Filters"),Object.keys(t).map((function(n){return r.a.createElement(Z,{key:n},r.a.createElement("h3",null,t[n].label),t[n].options.map((function(t){return r.a.createElement(ee,{key:"".concat(n,"_").concat(t.key)},r.a.createElement("input",{type:"checkbox",id:"".concat(n,"_").concat(t.key),"data-testid":"".concat(n,"_").concat(t.key),value:t.value,onChange:function(t){return e.onToggle(t,n)}}),r.a.createElement("label",{htmlFor:"".concat(n,"_").concat(t.key)},t.text))})))})))}}]),n}(r.a.PureComponent),ae=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getCharecters=function(e){var t=e.characters;if(t)switch(a.state.sort){case"ASC":t=t.sort((function(e,t){return parseInt(e.id)-parseInt(t.id)}));break;case"DSC":t=t.sort((function(e,t){return parseInt(t.id)-parseInt(e.id)}));break;default:t=t.sort((function(e,t){return parseInt(e.id)-parseInt(t.id)}))}return t},a.handleSearch=function(e){var t=a.state.query.filter;a.setState({query:{filter:Object(u.a)({},t,{name:e})}})},a.handleSort=function(e){a.setState({sort:e})},a.handleFilter=function(e){a.setState({query:{filter:e}})},a.state={query:{filter:{species:"",gender:"",name:""}},sort:""},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null,r.a.createElement(ne,{onFilter:this.handleFilter})),r.a.createElement(w,null,r.a.createElement(V,{onSearch:this.handleSearch,onSort:this.handleSort}),r.a.createElement(d.a,{query:v,variables:{species:this.state.query.filter.species,gender:this.state.query.filter.gender,name:this.state.query.filter.name}},(function(t){var n=t.loading,a=t.error,c=t.data;if(n)return r.a.createElement("div",null,"Loading...");if(a)return r.a.createElement("h1",null,"ERROR !");var l=e.getCharecters(c);return r.a.createElement(S,null,l.map((function(e){return r.a.createElement(W,{key:e.id,charecter:e})})))}))))}}]),n}(r.a.Component),re=n(62),ce=n(9),le=n(23),ue=n(8);function oe(){var e=Object(f.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    padding: 20px;\n"]);return oe=function(){return e},e}function ie(){var e=Object(f.a)(["\n    text-align: center;\n"]);return ie=function(){return e},e}var se=b.a.h1(ie()),me=b.a.div(oe()),pe=n(63),de=function(e){var t=e.component,n=Object(pe.a)(e,["component"]);return r.a.createElement(ue.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(ue.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},fe=n(24);function ge(){var e=Object(f.a)(["\n    padding: 5px;\n    margin-bottom: 10px;\n    color: ","\n"]);return ge=function(){return e},e}var he=b.a.div(ge(),(function(e){return"error"==e.type?"palevioletred":"teal"})),ve=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.status;if(console.log(e),!e||void 0===e)return null;var t=e.type,n=e.message;return r.a.createElement(he,{type:t},n)}}]),n}(r.a.PureComponent),be=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(fe.a)({},n,r))},a.handleSubmit=function(e,t){e.preventDefault(),t.handleLogin({username:a.state.username,password:a.state.password})},a.state={username:"",password:"",submitted:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password;t.redirect;return r.a.createElement(Ne.Consumer,null,(function(t){return r.a.createElement("div",{className:"container loginWrapper"},t.isAuth?r.a.createElement(ue.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,t.status&&r.a.createElement(ve,{status:t.status}),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:function(n){return e.handleSubmit(n,t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{required:!0,type:"text",name:"username",value:n,onChange:e.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{required:!0,type:"password",name:"password",value:a,onChange:e.handleChange})),r.a.createElement("div",{className:"form-action"},r.a.createElement("button",{type:"submit",className:"button"},"Login"),r.a.createElement(le.b,{to:"/register"},"Register"))),t.isAuth&&r.a.createElement("span",null,"Authenticated")))}))}}]),n}(r.a.Component),Ee=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(fe.a)({},n,r))},a.handleSubmit=function(e,t){e.preventDefault(),t.handleRegister({username:a.state.username,password:a.state.password})},a.state={username:"",password:"",confPassword:"",submitted:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password,c=t.confPassword;return r.a.createElement(Ne.Consumer,null,(function(t){return r.a.createElement("div",{className:"container loginWrapper"},t.status&&r.a.createElement(ve,{status:t.status}),r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:function(n){return e.handleSubmit(n,t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{required:!0,type:"text",name:"username",value:n,onChange:e.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{required:!0,type:"password",name:"password",value:a,onChange:e.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm"),r.a.createElement("input",{required:!0,type:"password",name:"confPassword",value:c,onChange:e.handleChange})),r.a.createElement("div",{className:"form-action"},r.a.createElement("button",{type:"submit",className:"button"},"Register"),r.a.createElement(le.b,{to:"/login"},"Login"))))}))}}]),n}(r.a.Component),ye=n(29),Oe=n.n(ye),je=n(39),we=n(40),Se=n.n(we),ke={login:function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se()({method:"post",baseURL:"".concat("/app","/user/login"),timeout:5e3,data:t});case 3:return n=e.sent,localStorage.setItem("user",JSON.stringify(n)),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se()({method:"post",baseURL:"".concat("/app","/user/signup"),timeout:5e3,data:t});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0.message),e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},xe=function(e,t){switch(t.type){case"loginSuccess":return Object(u.a)({},e,{auth:t.payload.data.token,name:t.payload.data.user,status:{type:"success",message:t.payload.data.message},isAuth:!0});case"loginError":return Object(u.a)({},e,{status:{type:"error",message:t.payload.error}});case"logoutUser":return Object(u.a)({},e,{auth:"",name:"",isAuth:!1});case"registrationSuccess":return Object(u.a)({},e,{status:{type:"success",message:t.payload.data.message}});case"registrationFailed":return Object(u.a)({},e,{status:{type:"error",message:t.payload.error}});default:return e}},Ce=new re.a({uri:"/api/graphql"}),Ne=r.a.createContext({}),qe={isAuth:!1,status:null},Ie=function(e){var t=r.a.useReducer(xe,qe),n=Object(o.a)(t,2),a=n[0],c=n[1];return r.a.createElement(Ne.Provider,{value:Object(u.a)({},a,{handleLogin:function(e){return ke.login(e).then((function(e){e.error?c({type:"loginError",payload:e}):c({type:"loginSuccess",payload:e})}))},handleRegister:function(e){return ke.register(e).then((function(e){e.error?c({type:"registrationFailed",payload:e}):c({type:"registrationSuccess",payload:e})}))},handleLogout:function(){localStorage.removeItem("user"),c({type:"logoutUser"})}})},e.children)};var Ae=function(){return r.a.createElement(ce.a,{client:Ce},r.a.createElement("header",null,r.a.createElement(se,null,"Rick & Morty")),r.a.createElement(me,null,r.a.createElement(Ie,null,r.a.createElement(le.a,null,r.a.createElement(ue.d,null,r.a.createElement(de,{exact:!0,path:"/",component:ae}),r.a.createElement(ue.b,{path:"/login",component:be}),r.a.createElement(ue.b,{path:"/register",component:Ee}),r.a.createElement(ue.a,{from:"*",to:"/"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.61e2d5e6.chunk.js.map